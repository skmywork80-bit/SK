<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>OUTLINEO</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; text-align:center; background:#f0f0f0; }
  #splash { position:fixed; width:100%; height:100%; background:#000; color:#fff; display:flex; justify-content:center; align-items:center; font-size:2em; flex-direction:column; }
  #main { display:none; padding:20px; }
  canvas { border:1px solid #000; margin-top:10px; max-width:90%; }
  button { padding:10px 20px; margin:10px; font-size:1em; cursor:pointer; }
</style>
</head>
<body>

<div id="splash">
  <div>WELCOME</div>
  <div>OUTLINEO</div>
</div>

<div id="namePage" style="display:none;">
  <h2>Enter Your Name</h2>
  <input type="text" id="userName" placeholder="Your name" />
  <button onclick="enterMain()">Submit</button>
</div>

<div id="main">
  <h2>Upload Image to Convert to Outline</h2>
  <input type="file" id="imgUpload" accept="image/*" />
  <br>
  <canvas id="canvas"></canvas>
  <br>
  <button id="downloadBtn">Download Outline</button>
</div>

<script>
  // Splash Screen
  setTimeout(() => {
    document.getElementById('splash').style.display = 'none';
    document.getElementById('namePage').style.display = 'block';
  }, 2000); // 2 seconds

  function enterMain() {
    let name = document.getElementById('userName').value.trim();
    if(name !== "") {
      document.getElementById('namePage').style.display = 'none';
      document.getElementById('main').style.display = 'block';
    } else {
      alert("Please enter your name");
    }
  }

  const uploadInput = document.getElementById('imgUpload');
  const canvas = document.getElementById('canvas');
  const ctx = canvas.getContext('2d');

  uploadInput.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if(file) {
      const img = new Image();
      img.onload = () => {
        canvas.width = img.width;
        canvas.height = img.height;
        ctx.drawImage(img,0,0);
        convertToOutline();
      }
      img.src = URL.createObjectURL(file);
    }
  });

  function convertToOutline() {
    const imageData = ctx.getImageData(0,0,canvas.width,canvas.height);
    const data = imageData.data;

    // Simple Edge Detection (grayscale + threshold)
    for(let i=0; i<data.length; i+=4){
      const avg = (data[i]+data[i+1]+data[i+2])/3;
      const threshold = avg < 128 ? 0 : 255;
      data[i] = data[i+1] = data[i+2] = threshold;
      data[i+3] = 255; // alpha
    }

    ctx.putImageData(imageData,0,0);
  }

  // Download Button
  const downloadBtn = document.getElementById('downloadBtn');
  downloadBtn.addEventListener('click', () => {
    const link = document.createElement('a');
    link.download = 'outline.png';
    link.href = canvas.toDataURL();
    link.click();
  });
</script>

</body>
</html>
