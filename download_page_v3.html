<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mini Dig & Build Game</title>
<style>
  body {
    margin: 0;
    background: #87CEEB;
    overflow: hidden;
  }

  canvas {
    background: #8fd18a;
    display: block;
    margin: 0 auto;
  }

  #ui {
    position: fixed;
    bottom: 0;
    width: 100%;
    display: flex;
    justify-content: space-between;
    padding: 10px;
    box-sizing: border-box;
  }

  .btn {
    width: 60px;
    height: 60px;
    background: #ffffffaa;
    border-radius: 10px;
    text-align: center;
    line-height: 60px;
    font-size: 25px;
    font-weight: bold;
    border: 2px solid #333;
    user-select: none;
  }

  #blocks {
    display: flex;
    gap: 5px;
  }

  .block {
    width: 40px;
    height: 40px;
    background: brown;
    border: 2px solid #000;
  }

  #shovel {
    background: #ffdd77;
  }
</style>
</head>
<body>

<canvas id="game" width="800" height="450"></canvas>

<div id="ui">
  <div id="controls">
    <div class="btn" id="left">⬅</div>
    <div class="btn" id="right">➡</div>
    <div class="btn" id="up">⬆</div>
    <div class="btn" id="down">⬇</div>
  </div>

  <div id="blocks">
    <div class="block" data-type="brick" style="background:red;"></div>
    <div class="block" data-type="wood" style="background:#8b4513;"></div>
    <div class="block" data-type="stone" style="background:gray;"></div>
    <div class="btn" id="shovel">⛏</div>
  </div>
</div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let gridSize = 30;
let rows = 15;
let cols = 30;

// মাটির গ্রিড তৈরি
let world = [];
for (let y = 0; y < rows; y++) {
  world[y] = [];
  for (let x = 0; x < cols; x++) {
    world[y][x] = y > 7 ? "dirt" : "air";
  }
}

// প্লেয়ার
let player = { x: 5, y: 7 };

// নির্বাচিত ব্লক
let selectedBlock = "brick";

// UI Event
document.querySelectorAll(".block").forEach(b => {
  b.onclick = () => selectedBlock = b.dataset.type;
});

// কন্ট্রোল
document.getElementById("left").onclick = () => player.x--;
document.getElementById("right").onclick = () => player.x++;
document.getElementById("up").onclick = () => player.y--;
document.getElementById("down").onclick = () => player.y++;

// খনন
document.getElementById("shovel").onclick = () => {
  if (world[player.y][player.x] !== "air") {
    world[player.y][player.x] = "air";
  }
};

// গেম আঁকা
function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  for (let y = 0; y < rows; y++) {
    for (let x = 0; x < cols; x++) {
      if (world[y][x] !== "air") {
        ctx.fillStyle = world[y][x] === "dirt" ? "#8b5a2b" : "gray";
        ctx.fillRect(x * gridSize, y * gridSize, gridSize, gridSize);
      }
    }
  }

  // খেলোয়াড়
  ctx.fillStyle = "blue";
  ctx.fillRect(player.x * gridSize, player.y * gridSize, gridSize, gridSize);

  requestAnimationFrame(draw);
}
draw();

// স্ক্রিনে ট্যাপ করলে বিল্ড
canvas.addEventListener("click", (e) => {
  let rect = canvas.getBoundingClientRect();
  let x = Math.floor((e.clientX - rect.left) / gridSize);
  let y = Math.floor((e.clientY - rect.top) / gridSize);
  world[y][x] = selectedBlock;
});
</script>

</body>
</html>
