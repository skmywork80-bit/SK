<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Emoji Plane Shooter</title>
<style>
  html, body { margin:0; padding:0; overflow:hidden; background:#0b0c10; font-family:sans-serif; }
  canvas { display:block; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

let W = canvas.width;
let H = canvas.height;

window.addEventListener('resize',()=>{ W=canvas.width=window.innerWidth; H=canvas.height=window.innerHeight; });

// Game state
let bullets = [];
let enemies = [];
let score = 0;

// Player plane
const player = {x:W/2, y:H-80, w:120, h:30, speed:12, roll:2};

// Pointer control
let pointerX = player.x;
let isDown = false;

canvas.addEventListener('mousedown', e=>{isDown=true; pointerX=e.clientX});
canvas.addEventListener('mousemove', e=>{if(isDown) pointerX=e.clientX});
window.addEventListener('mouseup', ()=>isDown=false);
canvas.addEventListener('touchstart', e=>{isDown=true; pointerX=e.touches[0].clientX; e.preventDefault();},{passive:false});
canvas.addEventListener('touchmove', e=>{pointerX=e.touches[0].clientX; e.preventDefault();},{passive:false});
canvas.addEventListener('touchend', ()=>isDown=false);

// Shoot emoji
function shoot(){
  const count = player.roll;
  const spread = 20;
  for(let i=0;i<count;i++){
    const t = (count===1)?0:(i/(count-1)-0.5);
    const angle = -Math.PI/2 + t*(spread*Math.PI/180);
    const speed = 8;
    bullets.push({x:player.x, y:player.y, vx:Math.cos(angle)*speed, vy:Math.sin(angle)*speed});
  }
}

// Enemy plane template
function spawnEnemy(){
  const x = Math.random()*(W-120)+60;
  const y = -60;
  enemies.push({x,y,w:120,h:30, roll:4});
}

// Initial enemies
spawnEnemy();

// Shooting control
canvas.addEventListener('click', shoot);
window.addEventListener('keydown', e=>{if(e.code==='Space') shoot()});

// Update loop
function update(){
  // Move player
  player.x += (pointerX-player.x)*0.2;
  if(player.x<player.w/2) player.x=player.w/2;
  if(player.x>W-player.w/2) player.x=W-player.w/2;

  // Update bullets
  for(let i=bullets.length-1;i>=0;i--){
    const b = bullets[i];
    b.x+=b.vx; b.y+=b.vy;
    if(b.y<-50 || b.x<-50 || b.x>W+50) bullets.splice(i,1);
  }

  // Update enemies
  for(let i=enemies.length-1;i>=0;i--){
    const e = enemies[i];
    e.y += 2; // speed
    // Collision
    for(let j=bullets.length-1;j>=0;j--){
      const b = bullets[j];
      if(b.x>e.x-e.w/2 && b.x<e.x+e.w/2 && b.y>e.y-e.h/2 && b.y<e.y+e.h/2){
        bullets.splice(j,1);
        enemies.splice(i,1);
        score+=1;
        // Spawn 2 new enemies as split effect
        spawnEnemy();
        spawnEnemy();
        break;
      }
    }
    // Enemy off screen
    if(e && e.y>H+30){
      enemies.splice(i,1);
      spawnEnemy();
    }
  }
}

// Draw loop
function draw(){
  ctx.clearRect(0,0,W,H);

  // Draw player
  ctx.fillStyle='#00ff9c';
  ctx.fillRect(player.x-player.w/2, player.y-player.h/2, player.w, player.h);
  ctx.fillStyle='#fff';
  ctx.font='bold 16px sans-serif';
  ctx.textAlign='center';
  ctx.fillText('SIYAM KHAN ROLL 2', player.x, player.y+5);

  // Draw bullets (emoji)
  ctx.font='28px sans-serif';
  for(const b of bullets){
    ctx.fillText('ðŸ–•', b.x, b.y);
  }

  // Draw enemies
  for(const e of enemies){
    ctx.fillStyle='#ff3838';
    ctx.fillRect(e.x-e.w/2, e.y-e.h/2, e.w, e.h);
    ctx.fillStyle='#fff';
    ctx.font='bold 16px sans-serif';
    ctx.textAlign='center';
    ctx.fillText('SIYAM KHAN ROLL 4', e.x, e.y+5);
  }

  // Score
  ctx.fillStyle='#fff';
  ctx.font='18px sans-serif';
  ctx.fillText('Score: '+score, 80,30);
}

// Game loop
function loop(){
  update();
  draw();
  requestAnimationFrame(loop);
}
loop();

// Spawn enemies periodically
setInterval(()=>{ if(enemies.length<5) spawnEnemy(); },1500);
</script>
</body>
</html>
